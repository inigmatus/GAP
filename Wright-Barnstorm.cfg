//Wright-Barnstorm - Wright Aeronautical: Barnstorm Jebediah's tool shed!

CONTRACT_TYPE
{


//REQUIREMENTS FOR CONTRACT TO APPEAR
	
	REQUIREMENT
	{
		name = CompleteContract
		type = CompleteContract
		
		contractType = Wright-FirstFlight
		minCount = 1

	}

	
//DATA NODES TO PROCESS FOR CONTRACT USE

//Contract Specific VesselParameterGroup Definition Key (to prevent conflict with other active contracts)
	DATA
	{
		type = string
		
		craft = GAPcraftWrightBarnstorm
		
	}
	
	
//CONTRACT DESCRIPTION

	name = Wright-Barnstorm
	title = Barnstorm Jebediah's tool shed!
	group = Wright Aeronautical
	agent = Wright Aeronautical
	
	description = There's an old tool shed near the R&D Center which is owned by Wright Aeronautical to store fuel for the aviation program. Jebediah Kerman thinks it's not only big enough to house an airplane, but even big enough to fly through it. Bill Kerman objected, Bob Kerman protested, and now Jebediah thinks we outta prove it.\n\nHe managed to convince Orville Kerman that the stunt was somehow for science, and now he has the keys to the shed. Grinning, he says he's already moved the fuel tanks to a safer location, and that we are now ready to try!
	
	synopsis = Go barnstorm Jebediah's tool shed near KSC.
	
	notes = Be sure your pilot signs off on the insurance waiver before attempting this one, as it's not covered.
	
	completedMessage = Amazing! You actually managed to fly an airplane through a building!\n\nYour pilot has earned some experience, and your organziation has gained some reputation for the stunt.

//Contract Limits
	maxCompletions = 0
   	maxSimultaneous = 1
	weight = 5.0

	autoAccept = false
	declinable = true
	cancellable = true

	minExpiry = 7.0
	maxExpiry = 7.0
	deadline = 0

//Contract Reward Modifiers
 	prestige = Trivial
   	targetBody = Kerbin

//Contract Rewards
  	advanceFunds = 0.0
  	rewardFunds = 0.0
  	rewardReputation = 15.0
	rewardScience = 0.0

//Contract Penalties
  	failureFunds = 5000.0
 	failureReputation = 5.0
	

//BEHAVIOURS TO DO WHEN CREATING CONTRACT

	BEHAVIOUR
	{
		name = WaypointGenerator
		type = WaypointGenerator

		PQS_CITY
		{
			name = Jebediah's Tool Shed
			icon = marker
			
			pqsCity = KSC
			pqsOffset = -718.042826443349, -402.142176951987, 30.4319297904094
			altitude = 30
			
		}
		
	}

//Spawn Tool Shed
	BEHAVIOUR
	{
		name = SpawnVessel
		type = SpawnVessel

		VESSEL
		{
			name = Tool Shed
			craftURL = ContractPacks/GAP/Assets/Land/Tool Shed.craft
			flagURL = ContractPacks/GAP/Assets/Flags/WrightAeronautical
			vesselType = Base
			owned = true
			
			pqsCity = KSC
			pqsOffset = -718.042826443349, -402.142176951987, 30.4319297904094

		}
		
	}
	
//Remove all SpawnVessels when done
	BEHAVIOUR
	{
		name = DestroyVessel
		type = DestroyVessel
		
		vessel = Tool Shed

		onState = CONTRACT_COMPLETED
		
	}
	
	BEHAVIOUR
	{
		name = AwardExperience
		type = AwardExperience
		
		parameter = VesselParameterGroupBarnstormFinish		
		experience = 1
		
	}

	
//PARAMETERS FOR CONTRACT COMPLETION

//Craft definition
	PARAMETER
	{
		name = VesselParameterGroup
		type = VesselParameterGroup
		title = Your aircraft must
		
		define = @/craft
		dissassociateVesselsOnContractCompletion = true
		
		PARAMETER
		{
			name = HasCrew
			type = HasCrew
			title = have a pilot
		
			minCrew = 1
		
			disableOnStateChange = false
			hideChildren = true

		}

		PARAMETER
		{
			name = PartValidation
			type = PartValidation
			title = have wings
			
			category = Aero
			
			disableOnStateChange = false
			hideChildren = true

		}
		
		disableOnStateChange = false

	}

//Contract Goals
//Barnstorm the Following
	PARAMETER
	{
		name = VesselParameterGroup
		type = VesselParameterGroup
		title = barnstorm Jebediah's Tool Shed
		
		vessel = @/craft
		
		PARAMETER
		{
			name = ReachState
			type = ReachState
			
			situation = FLYING
			minSpeed = 3.0				
			maxAltitude = 78
			
			completeInSequence = true
			hideChildren = true
			
		}
		
		PARAMETER
		{
			name = VisitWaypoint
			type = VisitWaypoint
			index = 0
			
			distance = 30
			hideOnCompletion = true
			
			disableOnStateChange = true
			hideChildren = true
			
		}
		
		hideChildren = true
	
	}

//Recovery Parameter - Landing
	PARAMETER
	{
		name = VesselParameterGroupBarnstormFinish
		type = VesselParameterGroup
		title = and then land anywhere
		
		vessel = @/craft

		PARAMETER
		{
			name = ReachState
			type = ReachState
			
			targetBody = Kerbin
			situation = LANDED
			maxSpeed = 0.0
			
			disableOnStateChange = false
			hideChildren = true

		}
		
		disableOnStateChange = false
		completeInSequence = true
		hideChildren = true
	
	}

//Recovery Parameter - Craft & Kerbal Safety Check
	PARAMETER
	{
		name = All
		type = All
		title = safely
		
		PARAMETER
		{
			name = VesselNotDestroyed
			type = VesselNotDestroyed
			title = without destroying your aircraft
			
			vessel = @/craft

		}
		
		PARAMETER
		{
			name = KerbalDeaths
			type = KerbalDeaths
			title = or killing anyone
			
			countMax = 1

		}
		
		completeInSequence = true
		disableOnStateChange = true

	}
	
}